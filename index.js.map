{"version":3,"file":"index.js","sources":["../src/js/iziToastHelper.js","../src/js/pixabay-api.js","../src/js/refs.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport '../fonts/style.css';\n\nexport function showError(message) {\n  iziToast.error({\n    ...commonStyles,\n    message: message,\n    color: '#ef4040',\n    icon: 'icon-error',\n  });\n}\n\nexport function showInfo(message) {\n  iziToast.info({\n    ...commonStyles,\n    message: message,\n    color: '#09f',\n    icon: 'icon-bell',\n  });\n}\n\nexport function showOk(message) {\n  iziToast.success({\n    ...commonStyles,\n    message: message,\n    color: '#59A10D',\n    icon: 'icon-ok',\n  });\n}\n\nconst commonStyles =\n  {\n    position: 'topRight',\n    titleColor: '#fff',\n    titleSize: '16px',\n    titleWeight: '700',\n    titleLineHeight: '1.5',\n    messageColor: '#fff',\n    messageSize: '16px',\n    messageWeight: '400',\n    messageLineHeight: '1.5',\n    iconColor: '#fff',\n    theme: 'dark',\n    maxWidth: '432px',\n  };\n","import axios from 'axios';\nimport { showError, showInfo } from './iziToastHelper.js';\n\nconst key = '52494269-f940d25beafa0bafe61525357';\nconst url = 'https://pixabay.com/api/';\nconst perPage = 9;\n\nexport async function getImagesByQuery(query, page) {\n  try {\n    const response = await axios.get(url, getParams(query, page));\n    const images = response.data.hits;\n\n    if (!images || !images.length) {\n      showError(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      return { images: [], isLastPage: true };\n    }\n\n    const isLastPage = getIsLastPage(response.data.totalHits, page);\n\n    if (isLastPage) {\n      showInfo('You have reached the end of the gallery!');\n    }\n\n    return { images: images, isLastPage: isLastPage };\n  } catch (error) {\n    showError(error.message);\n    return { images: [], isLastPage: true };\n  }\n}\n\nfunction getParams(query, page) {\n  return {\n    params: {\n      key: key,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: perPage,\n      page: page,\n    },\n  };\n}\n\nfunction getIsLastPage(totalHits, page) {\n  const total_pages = Math.ceil(totalHits / perPage);\n  return page >= total_pages;\n}","export const refs = {\n  form: document.querySelector('.form'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  loadMoreBtn: document.querySelector('.load-more-btn'),\n};","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { refs } from './refs.js';\n\nconst lightbox = new SimpleLightbox('.gallery a', {captionsData: 'alt', captionDelay: 250});\n\nexport function createGallery(images) {\n  const markup =\n    images\n      .map(\n        image =>\n          `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"gallery-img\">\n          </a>\n          <ul class=\"img-footer\">\n            <li class=\"img-footer-item\">\n              <h3 class=\"meta-header\">Likes</h3>\n              <p class=\"meta-info\">${image.likes}</p>\n            </li>\n            <li class=\"img-footer-item\">\n              <h3 class=\"meta-header\">Views</h3>\n              <p class=\"meta-info\">${image.views}</p>\n            </li>\n            <li class=\"img-footer-item\">\n              <h3 class=\"meta-header\">Comments</h3>\n              <p class=\"meta-info\">${image.comments}</p>\n            </li>\n            <li class=\"img-footer-item\">\n              <h3 class=\"meta-header\">Downloads</h3>\n              <p class=\"meta-info\">${image.downloads}</p>\n            </li>\n           </ul>\n       </li>`\n      )\n      .join('');\n\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  refs.gallery.innerHTML = '';\n}\n\nexport function showLoader() {\n  refs.loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  refs.loader.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n  refs.loadMoreBtn.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n  refs.loadMoreBtn.classList.add('hidden');\n}\n\nexport function scrollDown() {\n  window.scrollTo({\n    top: document.body.scrollHeight,\n    behavior: 'smooth'\n  });\n}","import { getImagesByQuery } from './js/pixabay-api.js';\nimport {\n  clearGallery,\n  createGallery,\n  hideLoader,\n  hideLoadMoreButton,\n  scrollDown,\n  showLoader,\n  showLoadMoreButton,\n} from './js/render-functions.js';\nimport { refs } from './js/refs.js';\n\nlet page = 1;\nlet lastQuery = '';\n\nrefs.form.addEventListener('submit', async e => {\n  e.preventDefault();\n  const inputValue = e.target.elements['search-text'].value.trim();\n  page = 1;\n\n  if (!inputValue) return;\n\n  e.target.reset();\n  clearGallery();\n  showLoader();\n  hideLoadMoreButton();\n  lastQuery = inputValue;\n\n  try {\n    const { images, isLastPage } = await getImagesByQuery(inputValue, page);\n    createGallery(images);\n    page++;\n    !isLastPage && showLoadMoreButton();\n  } finally {\n    hideLoader();\n  }\n});\n\nrefs.loadMoreBtn.addEventListener('click', async () => {\n  hideLoadMoreButton();\n  showLoader();\n  try {\n    const { images, isLastPage } = await getImagesByQuery(lastQuery, page);\n    createGallery(images);\n    page++;\n    !isLastPage && showLoadMoreButton();\n    scrollDown();\n  } finally {\n    hideLoader();\n  }\n});\n"],"names":["showError","message","iziToast","commonStyles","showInfo","key","url","perPage","getImagesByQuery","query","page","response","axios","getParams","images","isLastPage","getIsLastPage","error","totalHits","total_pages","refs","lightbox","SimpleLightbox","createGallery","markup","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","scrollDown","lastQuery","inputValue"],"mappings":"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"}